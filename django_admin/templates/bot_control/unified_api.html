{% extends 'base.html' %}
{% load static %}

{% block title %}API –ë—É–∫–º–µ–∫–µ—Ä–æ–≤ - –ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å{% endblock %}

{% block extra_css %}
<style>
    .api-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
    }

    .bookmaker-tabs {
        display: flex;
        gap: 10px;
        margin-bottom: 30px;
        background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
        border-radius: 15px;
        padding: 10px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }

    .tab-button {
        flex: 1;
        padding: 15px 20px;
        background: transparent;
        border: 2px solid #444;
        border-radius: 12px;
        color: #fff;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
    }

    .tab-button:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: #666;
        transform: translateY(-2px);
    }

    .tab-button.active {
        background: linear-gradient(135deg, #4CAF50, #45a049);
        border-color: #4CAF50;
        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
    }

    .bookmaker-content {
        display: none;
        background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
        border-radius: 15px;
        padding: 25px;
        border: 2px solid #333;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        animation: fadeIn 0.5s ease-in-out;
    }

    .bookmaker-content.active {
        display: block;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .api-section {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 25px;
        border: 2px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    .section-title {
        color: #4CAF50;
        font-size: 1.5em;
        font-weight: bold;
        margin-bottom: 20px;
        text-align: center;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    }

    .form-group {
        margin-bottom: 20px;
    }

    .form-label {
        display: block;
        color: #fff;
        font-weight: 500;
        margin-bottom: 8px;
        font-size: 1.1em;
    }

    .form-input {
        width: 100%;
        padding: 15px 20px;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
        border: 2px solid #444;
        border-radius: 12px;
        color: #fff;
        font-size: 1.1em;
        transition: all 0.3s ease;
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .form-input:focus {
        outline: none;
        border-color: #4CAF50;
        background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(76, 175, 80, 0.05) 100%);
        box-shadow: 0 0 20px rgba(76, 175, 80, 0.3), inset 0 2px 4px rgba(0, 0, 0, 0.1);
        transform: translateY(-2px);
    }

    .btn {
        padding: 15px 30px;
        border: none;
        border-radius: 12px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        position: relative;
        overflow: hidden;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .btn-primary {
        background: linear-gradient(135deg, #4CAF50, #45a049);
        color: white;
    }

    .btn-primary:hover {
        background: linear-gradient(135deg, #45a049, #4CAF50);
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(76, 175, 80, 0.4);
    }

    .btn-secondary {
        background: linear-gradient(135deg, #FF9800, #F57C00);
        color: white;
    }

    .btn-secondary:hover {
        background: linear-gradient(135deg, #F57C00, #FF9800);
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(255, 152, 0, 0.4);
    }

    .result-container {
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
        border-radius: 15px;
        padding: 25px;
        margin-top: 20px;
        border: 2px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .result-success {
        border-color: #4CAF50;
        background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(76, 175, 80, 0.05) 100%);
    }

    .result-error {
        border-color: #f44336;
        background: linear-gradient(135deg, rgba(244, 67, 54, 0.1) 0%, rgba(244, 67, 54, 0.05) 100%);
    }

    .result-title {
        font-weight: bold;
        margin-bottom: 10px;
        font-size: 1.2em;
    }

    .result-success .result-title {
        color: #4CAF50;
    }

    .result-error .result-title {
        color: #f44336;
    }

    .result-content {
        color: #fff;
        line-height: 1.6;
    }

    .loading {
        text-align: center;
        color: #4CAF50;
        font-size: 1.1em;
        padding: 20px;
    }

    .api-status {
        background: linear-gradient(135deg, #1a1a1a 0%, #2a2a2a 100%);
        border: 2px solid #333;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 25px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
    }

    .api-status h4 {
        color: #4CAF50;
        margin-bottom: 15px;
        font-size: 1.2em;
        text-align: center;
    }

    .status-indicator {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
    }

    .status-item {
        display: flex;
        align-items: center;
        background: rgba(255, 255, 255, 0.05);
        padding: 15px;
        border-radius: 10px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
    }

    .status-item:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: #4CAF50;
    }

    .status-icon {
        margin-right: 15px;
        font-size: 1.5em;
    }

    .status-icon.success {
        color: #4CAF50;
    }

    .status-icon.error {
        color: #f44336;
    }

    .status-text {
        flex: 1;
    }

    .status-label {
        color: #fff;
        font-weight: bold;
        margin-bottom: 5px;
    }

    .status-description {
        color: #ccc;
        font-size: 0.9em;
    }

    .api-key-section {
        background: linear-gradient(135deg, rgba(255, 152, 0, 0.1) 0%, rgba(255, 152, 0, 0.05) 100%);
        border: 2px solid #FF9800;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 25px;
    }

    .api-key-section h4 {
        color: #FF9800;
        margin-bottom: 15px;
        text-align: center;
    }

    .api-key-input {
        display: flex;
        gap: 10px;
        align-items: center;
    }

    .api-key-input input {
        flex: 1;
    }

    .api-key-status {
        padding: 10px 15px;
        border-radius: 8px;
        font-weight: bold;
        text-align: center;
        margin-top: 10px;
    }

    .api-key-status.valid {
        background: rgba(76, 175, 80, 0.2);
        color: #4CAF50;
        border: 1px solid #4CAF50;
    }

    .api-key-status.invalid {
        background: rgba(244, 67, 54, 0.2);
        color: #f44336;
        border: 1px solid #f44336;
    }

    .player-info {
        background: linear-gradient(135deg, rgba(33, 150, 243, 0.1) 0%, rgba(33, 150, 243, 0.05) 100%);
        border: 2px solid #2196F3;
        border-radius: 15px;
        padding: 20px;
        margin-top: 20px;
        display: none;
    }

    .player-info.show {
        display: block;
        animation: slideIn 0.5s ease-out;
    }

    .player-info h4 {
        color: #2196F3;
        margin-bottom: 15px;
        text-align: center;
    }

    .player-detail {
        display: flex;
        align-items: center;
        margin-bottom: 10px;
        padding: 10px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 8px;
    }

    .player-detail-icon {
        margin-right: 15px;
        font-size: 1.2em;
        color: #2196F3;
    }

    .player-detail-content {
        flex: 1;
    }

    .player-detail-label {
        color: #ccc;
        font-size: 0.9em;
        margin-bottom: 2px;
    }

    .player-detail-value {
        color: #fff;
        font-weight: bold;
    }
</style>
{% endblock %}

{% block content %}
<div class="api-container">
    <h1 style="text-align: center; color: #4CAF50; margin-bottom: 30px; font-size: 2.5em; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);">
        üéØ API –ë—É–∫–º–µ–∫–µ—Ä–æ–≤
    </h1>
    
    <!-- –í–∫–ª–∞–¥–∫–∏ –±—É–∫–º–µ–∫–µ—Ä–æ–≤ -->
    <div class="bookmaker-tabs">
        <button class="tab-button active" onclick="showBookmaker('1xbet')">1XBET</button>
        <button class="tab-button" onclick="showBookmaker('1win')">1WIN</button>
        <button class="tab-button" onclick="showBookmaker('melbet')">MELBET</button>
        <button class="tab-button" onclick="showBookmaker('mostbet')">MOSTBET</button>
    </div>

    <!-- 1XBET -->
    <div id="1xbet" class="bookmaker-content active">
        <div class="api-status">
            <h4>üîß –°—Ç–∞—Ç—É—Å API 1XBET</h4>
            <div class="status-indicator">
                <div class="status-item">
                    <div class="status-icon success">‚úÖ</div>
                    <div class="status-text">
                        <div class="status-label">API –ö–ª—é—á</div>
                        <div class="status-description">–ù–∞—Å—Ç—Ä–æ–µ–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω</div>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-icon success">‚úÖ</div>
                    <div class="status-text">
                        <div class="status-label">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</div>
                        <div class="status-description">–°—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="api-key-section">
            <h4>üîë API –ö–ª—é—á 1XBET</h4>
            <div class="form-group">
                <label class="form-label">API Key:</label>
                <input type="text" id="1xbet-api-key" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á 1XBET">
            </div>
            <div class="api-key-status" id="1xbet-status" style="display: none;"></div>
        </div>

        <div class="api-section">
            <h3 class="section-title">üí∞ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞</h3>
            <div class="form-group">
                <label class="form-label">–ù–æ–º–µ—Ä –∫–∞—Å—Å—ã:</label>
                <input type="text" id="1xbet-cashdesk" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∫–∞—Å—Å—ã">
            </div>
            <button class="btn btn-primary" onclick="checkBalance('1xbet')">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
            <div id="1xbet-balance-result"></div>
        </div>

        <div class="api-section">
            <h3 class="section-title">üîç –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞</h3>
            <div class="form-group">
                <label class="form-label">ID –∏–≥—Ä–æ–∫–∞:</label>
                <input type="text" id="1xbet-player-id" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä–æ–∫–∞">
            </div>
            <button class="btn btn-primary" onclick="searchPlayer('1xbet')">–ù–∞–π—Ç–∏ –∏–≥—Ä–æ–∫–∞</button>
            <div id="1xbet-player-result"></div>
        </div>

        <div class="api-section">
            <h3 class="section-title">üí≥ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞</h3>
            <div class="form-group">
                <label class="form-label">ID –∏–≥—Ä–æ–∫–∞:</label>
                <input type="text" id="1xbet-deposit-player" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä–æ–∫–∞">
            </div>
            <div class="form-group">
                <label class="form-label">–°—É–º–º–∞:</label>
                <input type="number" id="1xbet-deposit-amount" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
            </div>
            <button class="btn btn-secondary" onclick="depositPlayer('1xbet')">–ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á–µ—Ç</button>
            <div id="1xbet-deposit-result"></div>
        </div>
    </div>

    <!-- 1WIN -->
    <div id="1win" class="bookmaker-content">
        <div class="api-status">
            <h4>üîß –°—Ç–∞—Ç—É—Å API 1WIN</h4>
            <div class="status-indicator">
                <div class="status-item">
                    <div class="status-icon success">‚úÖ</div>
                    <div class="status-text">
                        <div class="status-label">API –ö–ª—é—á</div>
                        <div class="status-description">–ù–∞—Å—Ç—Ä–æ–µ–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω</div>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-icon success">‚úÖ</div>
                    <div class="status-text">
                        <div class="status-label">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</div>
                        <div class="status-description">–°—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="api-key-section">
            <h4>üîë API –ö–ª—é—á 1WIN</h4>
            <div class="form-group">
                <label class="form-label">API Key:</label>
                <input type="text" id="1win-api-key" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á 1WIN">
            </div>
            <div class="api-key-status" id="1win-status" style="display: none;"></div>
        </div>

        <div class="api-section">
            <h3 class="section-title">üí∞ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞</h3>
            <div class="form-group">
                <label class="form-label">–ù–æ–º–µ—Ä –∫–∞—Å—Å—ã:</label>
                <input type="text" id="1win-cashdesk" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∫–∞—Å—Å—ã">
            </div>
            <button class="btn btn-primary" onclick="checkBalance('1win')">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
            <div id="1win-balance-result"></div>
        </div>

        <div class="api-section">
            <h3 class="section-title">üîç –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞</h3>
            <div class="form-group">
                <label class="form-label">ID –∏–≥—Ä–æ–∫–∞:</label>
                <input type="text" id="1win-player-id" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä–æ–∫–∞">
            </div>
            <button class="btn btn-primary" onclick="searchPlayer('1win')">–ù–∞–π—Ç–∏ –∏–≥—Ä–æ–∫–∞</button>
            <div id="1win-player-result"></div>
        </div>

        <div class="api-section">
            <h3 class="section-title">üí≥ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞</h3>
            <div class="form-group">
                <label class="form-label">ID –∏–≥—Ä–æ–∫–∞:</label>
                <input type="text" id="1win-deposit-player" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä–æ–∫–∞">
            </div>
            <div class="form-group">
                <label class="form-label">–°—É–º–º–∞:</label>
                <input type="number" id="1win-deposit-amount" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
            </div>
            <button class="btn btn-secondary" onclick="depositPlayer('1win')">–ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á–µ—Ç</button>
            <div id="1win-deposit-result"></div>
        </div>
    </div>

    <!-- MELBET -->
    <div id="melbet" class="bookmaker-content">
        <div class="api-status">
            <h4>üîß –°—Ç–∞—Ç—É—Å API MELBET</h4>
            <div class="status-indicator">
                <div class="status-item">
                    <div class="status-icon success">‚úÖ</div>
                    <div class="status-text">
                        <div class="status-label">API –ö–ª—é—á</div>
                        <div class="status-description">–ù–∞—Å—Ç—Ä–æ–µ–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω</div>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-icon success">‚úÖ</div>
                    <div class="status-text">
                        <div class="status-label">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</div>
                        <div class="status-description">–°—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="api-key-section">
            <h4>üîë API –ö–ª—é—á MELBET</h4>
            <div class="form-group">
                <label class="form-label">API Key:</label>
                <input type="text" id="melbet-api-key" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á MELBET">
            </div>
            <div class="api-key-status" id="melbet-status" style="display: none;"></div>
        </div>

        <div class="api-section">
            <h3 class="section-title">üí∞ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞</h3>
            <div class="form-group">
                <label class="form-label">–ù–æ–º–µ—Ä –∫–∞—Å—Å—ã:</label>
                <input type="text" id="melbet-cashdesk" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∫–∞—Å—Å—ã">
            </div>
            <button class="btn btn-primary" onclick="checkBalance('melbet')">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
            <div id="melbet-balance-result"></div>
        </div>

        <div class="api-section">
            <h3 class="section-title">üîç –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞</h3>
            <div class="form-group">
                <label class="form-label">ID –∏–≥—Ä–æ–∫–∞:</label>
                <input type="text" id="melbet-player-id" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä–æ–∫–∞">
            </div>
            <button class="btn btn-primary" onclick="searchPlayer('melbet')">–ù–∞–π—Ç–∏ –∏–≥—Ä–æ–∫–∞</button>
            <div id="melbet-player-result"></div>
        </div>

        <div class="api-section">
            <h3 class="section-title">üí≥ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞</h3>
            <div class="form-group">
                <label class="form-label">ID –∏–≥—Ä–æ–∫–∞:</label>
                <input type="text" id="melbet-deposit-player" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä–æ–∫–∞">
            </div>
            <div class="form-group">
                <label class="form-label">–°—É–º–º–∞:</label>
                <input type="number" id="melbet-deposit-amount" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
            </div>
            <button class="btn btn-secondary" onclick="depositPlayer('melbet')">–ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á–µ—Ç</button>
            <div id="melbet-deposit-result"></div>
        </div>
    </div>

    <!-- MOSTBET -->
    <div id="mostbet" class="bookmaker-content">
        <div class="api-status">
            <h4>üîß –°—Ç–∞—Ç—É—Å API MOSTBET</h4>
            <div class="status-indicator">
                <div class="status-item">
                    <div class="status-icon success">‚úÖ</div>
                    <div class="status-text">
                        <div class="status-label">API –ö–ª—é—á</div>
                        <div class="status-description">–ù–∞—Å—Ç—Ä–æ–µ–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω</div>
                    </div>
                </div>
                <div class="status-item">
                    <div class="status-icon success">‚úÖ</div>
                    <div class="status-text">
                        <div class="status-label">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</div>
                        <div class="status-description">–°—Ç–∞–±–∏–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="api-key-section">
            <h4>üîë API –ö–ª—é—á MOSTBET</h4>
            <div class="form-group">
                <label class="form-label">API Key:</label>
                <input type="text" id="mostbet-api-key" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ API –∫–ª—é—á MOSTBET">
            </div>
            <div class="api-key-status" id="mostbet-status" style="display: none;"></div>
        </div>

        <div class="api-section">
            <h3 class="section-title">üí∞ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞</h3>
            <div class="form-group">
                <label class="form-label">–ù–æ–º–µ—Ä –∫–∞—Å—Å—ã:</label>
                <input type="text" id="mostbet-cashdesk" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∫–∞—Å—Å—ã">
            </div>
            <button class="btn btn-primary" onclick="checkBalance('mostbet')">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
            <div id="mostbet-balance-result"></div>
        </div>

        <div class="api-section">
            <h3 class="section-title">üîç –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞</h3>
            <div class="form-group">
                <label class="form-label">ID –∏–≥—Ä–æ–∫–∞:</label>
                <input type="text" id="mostbet-player-id" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä–æ–∫–∞">
            </div>
            <button class="btn btn-primary" onclick="searchPlayer('mostbet')">–ù–∞–π—Ç–∏ –∏–≥—Ä–æ–∫–∞</button>
            <div id="mostbet-player-result"></div>
        </div>

        <div class="api-section">
            <h3 class="section-title">üí≥ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞</h3>
            <div class="form-group">
                <label class="form-label">ID –∏–≥—Ä–æ–∫–∞:</label>
                <input type="text" id="mostbet-deposit-player" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä–æ–∫–∞">
            </div>
            <div class="form-group">
                <label class="form-label">–°—É–º–º–∞:</label>
                <input type="number" id="mostbet-deposit-amount" class="form-input" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É">
            </div>
            <button class="btn btn-secondary" onclick="depositPlayer('mostbet')">–ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á–µ—Ç</button>
            <div id="mostbet-deposit-result"></div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
function showBookmaker(bookmaker) {
    // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
    document.querySelectorAll('.bookmaker-content').forEach(content => {
        content.classList.remove('active');
    });
    
    // –£–±—Ä–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
    document.querySelectorAll('.tab-button').forEach(button => {
        button.classList.remove('active');
    });
    
    // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
    document.getElementById(bookmaker).classList.add('active');
    
    // –î–æ–±–∞–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ
    event.target.classList.add('active');
}

async function checkBalance(bookmaker) {
    const resultDiv = document.getElementById(`${bookmaker}-balance-result`);
    const cashdesk = document.getElementById(`${bookmaker}-cashdesk`).value;
    
    if (!cashdesk) {
        showResult(resultDiv, 'error', '–û—à–∏–±–∫–∞', '–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä –∫–∞—Å—Å—ã');
        return;
    }
    
    showLoading(resultDiv);
    
    try {
        const response = await fetch(`/bot/api/${bookmaker}/balance/`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCookie('csrftoken')
            },
            body: JSON.stringify({
                cashdesk_id: cashdesk
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            showResult(resultDiv, 'success', '–ë–∞–ª–∞–Ω—Å –ø–æ–ª—É—á–µ–Ω', 
                `–ë–∞–ª–∞–Ω—Å: ${data.balance} KGS<br>–õ–∏–º–∏—Ç: ${data.limit} KGS`);
        } else {
            showResult(resultDiv, 'error', '–û—à–∏–±–∫–∞', data.message || '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –±–∞–ª–∞–Ω—Å');
        }
    } catch (error) {
        showResult(resultDiv, 'error', '–û—à–∏–±–∫–∞', '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
    }
}

async function searchPlayer(bookmaker) {
    const resultDiv = document.getElementById(`${bookmaker}-player-result`);
    const playerId = document.getElementById(`${bookmaker}-player-id`).value;
    
    if (!playerId) {
        showResult(resultDiv, 'error', '–û—à–∏–±–∫–∞', '–í–≤–µ–¥–∏—Ç–µ ID –∏–≥—Ä–æ–∫–∞');
        return;
    }
    
    showLoading(resultDiv);
    
    try {
        const response = await fetch(`/bot/api/${bookmaker}/search-player/`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCookie('csrftoken')
            },
            body: JSON.stringify({
                player_id: playerId
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            showResult(resultDiv, 'success', '–ò–≥—Ä–æ–∫ –Ω–∞–π–¥–µ–Ω', 
                `ID: ${data.userId}<br>–ò–º—è: ${data.name}<br>–í–∞–ª—é—Ç–∞: ${data.currencyId}`);
        } else {
            showResult(resultDiv, 'error', '–û—à–∏–±–∫–∞', data.message || '–ò–≥—Ä–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω');
        }
    } catch (error) {
        showResult(resultDiv, 'error', '–û—à–∏–±–∫–∞', '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
    }
}

async function depositPlayer(bookmaker) {
    const resultDiv = document.getElementById(`${bookmaker}-deposit-result`);
    const playerId = document.getElementById(`${bookmaker}-deposit-player`).value;
    const amount = document.getElementById(`${bookmaker}-deposit-amount`).value;
    
    if (!playerId || !amount) {
        showResult(resultDiv, 'error', '–û—à–∏–±–∫–∞', '–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
        return;
    }
    
    showLoading(resultDiv);
    
    try {
        const response = await fetch(`/bot/api/${bookmaker}/deposit/`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'X-CSRFToken': getCookie('csrftoken')
            },
            body: JSON.stringify({
                player_id: playerId,
                amount: parseFloat(amount)
            })
        });
        
        const data = await response.json();
        
        if (data.success) {
            showResult(resultDiv, 'success', '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ', 
                `–°—É–º–º–∞: ${data.summa} KGS<br>–°—Ç–∞—Ç—É—Å: ${data.success ? '–£—Å–ø–µ—à–Ω–æ' : '–û—à–∏–±–∫–∞'}`);
        } else {
            showResult(resultDiv, 'error', '–û—à–∏–±–∫–∞', data.message || '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á–µ—Ç');
        }
    } catch (error) {
        showResult(resultDiv, 'error', '–û—à–∏–±–∫–∞', '–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º');
    }
}

function showLoading(container) {
    container.innerHTML = '<div class="loading">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</div>';
}

function showResult(container, type, title, content) {
    container.innerHTML = `
        <div class="result-container result-${type}">
            <div class="result-title">${title}</div>
            <div class="result-content">${content}</div>
        </div>
    `;
}

function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
</script>
{% endblock %}


























