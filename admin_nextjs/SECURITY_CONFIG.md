# üõ°Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –∑–∞—â–∏—Ç—ã –æ—Ç DDoS

## –û–±–∑–æ—Ä –∑–∞—â–∏—Ç—ã

–°–∏—Å—Ç–µ–º–∞ –≤–∫–ª—é—á–∞–µ—Ç –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—É—é –∑–∞—â–∏—Ç—É –æ—Ç DDoS –∞—Ç–∞–∫ –∏ –¥—Ä—É–≥–∏—Ö —É–≥—Ä–æ–∑:

### 1. Next.js Middleware (admin_nextjs/middleware.ts)
- ‚úÖ Rate limiting –¥–ª—è –≤—Å–µ—Ö endpoints
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ User-Agent
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ Cloudflare –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (–≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö IP
- ‚úÖ Security headers (X-Content-Type-Options, X-Frame-Options, HSTS –∏ —Ç.–¥.)

### 2. Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- ‚úÖ Rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ Nginx (30 req/min –¥–ª—è API, 120 req/min –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü)
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (20 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —Å –æ–¥–Ω–æ–≥–æ IP)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç Slowloris –∞—Ç–∞–∫–∏ (—Ç–∞–π–º–∞—É—Ç—ã)
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö User-Agent
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ (10MB)
- ‚úÖ –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ Cloudflare IP (–≤ cloudflare –∫–æ–Ω—Ñ–∏–≥–∞—Ö)

### 3. API Endpoints –∑–∞—â–∏—Ç–∞
- ‚úÖ Rate limiting –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö endpoints (payment, withdraw-execute, webhook)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç XSS
- ‚úÖ –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### 4. Python –±–æ—Ç—ã (bot_simple/)
- ‚úÖ Rate limiting –¥–ª—è –≤—Å–µ—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É)
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ (15 –º–∏–Ω—É—Ç)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π –∏ XSS
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Rate Limiting

### Next.js Middleware
- **–ü—É–±–ª–∏—á–Ω—ã–µ API**: 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **–ó–∞—â–∏—â–µ–Ω–Ω—ã–µ API**: 100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **–°—Ç—Ä–∞–Ω–∏—Ü—ã**: 120 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **–õ–æ–≥–∏–Ω**: 20 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É

### Nginx
- **API endpoints**: 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É (burst 10)
- **–û–±—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**: 120 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É (burst 20)
- **–õ–æ–≥–∏–Ω**: 10 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É (burst 3)
- **–ú–∞–∫—Å–∏–º—É–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π**: 20 —Å –æ–¥–Ω–æ–≥–æ IP

### Python –±–æ—Ç—ã
- **–í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏**: 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞**: 15 –º–∏–Ω—É—Ç –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏

## –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP

IP –∞–¥—Ä–µ—Å–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏:
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–∏ rate limit (15 –º–∏–Ω—É—Ç)
- –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö (User-Agent, —Ä–∞–∑–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞)
- –ü–æ–ø—ã—Ç–∫–∞—Ö SQL –∏–Ω—ä–µ–∫—Ü–∏–π –∏–ª–∏ XSS

## Cloudflare –∑–∞—â–∏—Ç–∞

–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Cloudflare:
1. –°–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π IP —Å–µ—Ä–≤–µ—Ä–∞
2. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—É—é –∑–∞—â–∏—Ç—É –æ—Ç DDoS
3. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏
4. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

–°–º. `CLOUDFLARE_DDOS_PROTECTION.md` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
- –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ rate limit
- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ IP
- –ü–æ–ø—ã—Ç–∫–∏ SQL –∏–Ω—ä–µ–∫—Ü–∏–π
- –ü–æ–ø—ã—Ç–∫–∏ XSS
- –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–µ—Ä—É (–º–∏–Ω—É—è Cloudflare)

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Cloudflare** –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã
2. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏** –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
3. **–û–±–Ω–æ–≤–ª—è–π—Ç–µ IP –¥–∏–∞–ø–∞–∑–æ–Ω—ã Cloudflare** —Ä–∞–∑ –≤ –º–µ—Å—è—Ü
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã** –Ω–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ rate limit
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Redis** –¥–ª—è rate limiting –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (–≤–º–µ—Å—Ç–æ in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–∞)

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ IP –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ Cloudflare

```bash
# –°–∫–∞—á–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ IP
curl https://www.cloudflare.com/ips-v4 -o /tmp/cf-ipv4.txt
curl https://www.cloudflare.com/ips-v6 -o /tmp/cf-ipv6.txt

# –û–±–Ω–æ–≤–∏—Ç—å Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—â–∏—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ rate limiting
```bash
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 429 –ø–æ—Å–ª–µ 30 –∑–∞–ø—Ä–æ—Å–æ–≤
for i in {1..35}; do curl -I https://japar.click/api/payment; done
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ User-Agent
```bash
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 403
curl -H "User-Agent: curl/7.68.0" https://japar.click/api/payment
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Cloudflare
```bash
# –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å Cloudflare –∑–∞–≥–æ–ª–æ–≤–∫–∏
curl -I https://japar.click | grep -i "cf-"
```

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã –∑–∞—â–∏—Ç—ã

1. **Firewall (UFW)**: –†–∞–∑—Ä–µ—à–∏—Ç—å —Ç–æ–ª—å–∫–æ Cloudflare IP –∏ SSH
2. **Fail2ban**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö
3. **Monitoring**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
4. **Backup**: –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π –∏–ª–∏ –ø—Ä–æ–±–ª–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.

