# –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ .env –¥–ª—è MobCash API

## –í–∞—Ä–∏–∞–Ω—Ç 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π OAuth2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
# MobCash API - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π OAuth2 (–í–∞—Ä–∏–∞–Ω—Ç 2)
MOBCASH_LOGIN="burgoevk"
MOBCASH_PASSWORD="Kanat312###"
MOBCASH_CASHDESK_ID="1001098"
MOBCASH_DEFAULT_LAT=42.845778
MOBCASH_DEFAULT_LON=74.568778

# –°—Ç–∞—Ä—ã–µ —Ç–æ–∫–µ–Ω—ã - –ó–ê–ö–û–ú–ú–ï–ù–¢–ò–†–£–ô–¢–ï –∏–ª–∏ –£–î–ê–õ–ò–¢–ï –¥–ª—è "—á–∏—Å—Ç–æ–≥–æ" –≤–∞—Ä–∏–∞–Ω—Ç–∞ 2
# MOBCASH_BEARER_TOKEN="ory_at_..."
# MOBCASH_USER_ID="1985621306577461248"
# MOBCASH_SESSION_ID="1988638502723461120"
```

## –ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç:

‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ  
‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤** –ø—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ (401 –æ—à–∏–±–∫–∞)  
‚úÖ **–ù–µ —Ç—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç 24/7  
‚úÖ **–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤** –Ω–∞ 1 —á–∞—Å –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `.env`, –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
cd admin_nextjs
npm run check-mobcash-config
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `npx`:
```bash
npx tsx scripts/check-mobcash-config.ts
```

–°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç:
- ‚úÖ –ö–∞–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- ‚ö†Ô∏è –ö–∞–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- üìã –¢–∏–ø –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–í–∞—Ä–∏–∞–Ω—Ç 2, –ì–∏–±—Ä–∏–¥–Ω—ã–π, –∏–ª–∏ –¢–æ–ª—å–∫–æ —Ç–æ–∫–µ–Ω—ã)

## –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å:**
   ```bash
   pm2 restart luxon-email-watcher
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   pm2 logs luxon-email-watcher --lines 50
   ```

3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   ```
   [MobCash Auth] üîÑ Starting OAuth2 flow with login: burgoevk
   [MobCash Auth] ‚úÖ OAuth2 flow completed successfully
   ```

## –ì–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥–æ—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã, –Ω–æ –∏–º–µ—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:

```env
# –ì–æ—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å)
MOBCASH_BEARER_TOKEN="ory_at_..."
MOBCASH_USER_ID="..."
MOBCASH_SESSION_ID="..."

# –õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (fallback)
MOBCASH_LOGIN="burgoevk"
MOBCASH_PASSWORD="Kanat312###"
MOBCASH_CASHDESK_ID="1001098"
MOBCASH_DEFAULT_LAT=42.845778
MOBCASH_DEFAULT_LON=74.568778
```

–í —ç—Ç–æ–º —Å–ª—É—á–∞–µ:
- –°–Ω–∞—á–∞–ª–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≥–æ—Ç–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã (–±—ã—Å—Ç—Ä–µ–µ)
- –ü—Ä–∏ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è OAuth2 flow
- –ù–æ–≤—ã–µ —Ç–æ–∫–µ–Ω—ã –∫–µ—à–∏—Ä—É—é—Ç—Å—è –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–∞–ª—å—à–µ

