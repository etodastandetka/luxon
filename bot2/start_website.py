#!/usr/bin/env python3
"""
–ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–∞–π—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å–æ–≥–ª–∞—Å–Ω–æ –¢–ó
"""
import subprocess
import sys
import os
import time

def start_website():
    """–ó–∞–ø—É—Å–∫ Next.js –≤–µ–±-—Å–∞–π—Ç–∞"""
    print("üåê –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–∞–π—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...")
    print("=" * 50)
    print("üì± –§—É–Ω–∫—Ü–∏–∏ —Å–∞–π—Ç–∞:")
    print("üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å - –≤—ã–±–æ—Ä –∫–∞–∑–∏–Ω–æ, ID, —Å—É–º–º–∞, QR-—Å—Å—ã–ª–∫–∏")
    print("üí∞ –í—ã–≤–µ—Å—Ç–∏ - –∑–∞—è–≤–∫–∏ –Ω–∞ –≤—ã–≤–æ–¥ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º")
    print("üìú –ò—Å—Ç–æ—Ä–∏—è - –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è")
    print("üë• –†–µ—Ñ–µ—Ä–∞–ª—ã - –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞")
    print("üßæ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è - –ø–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è")
    print("üéß –ü–æ–¥–¥–µ—Ä–∂–∫–∞ - –∫–æ–Ω—Ç–∞–∫—Ç—ã –∏ FAQ")
    print("=" * 50)
    
    # –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å —Å–∞–π—Ç–æ–º
    website_dir = os.path.join(os.path.dirname(__file__), 'mini_app_site')
    
    if not os.path.exists(website_dir):
        print(f"‚ùå –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è {website_dir} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞")
        return
    
    try:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
        if not os.path.exists(os.path.join(website_dir, 'node_modules')):
            print("üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...")
            subprocess.run(['npm', 'install'], cwd=website_dir, check=True)
        
        print("üöÄ –ó–∞–ø—É—Å–∫ –≤–µ–±-—Å–∞–π—Ç–∞ –Ω–∞ http://localhost:3030")
        print("–ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏...")
        
        # –ó–∞–ø—É—Å–∫–∞–µ–º Next.js
        subprocess.run(['npm', 'run', 'dev'], cwd=website_dir, check=True)
        
    except subprocess.CalledProcessError as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞: {e}")
        sys.exit(1)
    except KeyboardInterrupt:
        print("\nüõë –í–µ–±-—Å–∞–π—Ç –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω")
    except Exception as e:
        print(f"‚ùå –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞: {e}")
        sys.exit(1)

if __name__ == "__main__":
    start_website()

