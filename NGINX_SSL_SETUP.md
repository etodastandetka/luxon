# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

## –®–∞–≥ 1: –í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª–∏)

```bash
cd /var/www/luxon
chmod +x setup_server_on_remote.sh
bash setup_server_on_remote.sh
```

---

## –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Nginx

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nginx -t

# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: "syntax is ok" –∏ "test is successful"
```

---

## –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ —Å–∞–π—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ HTTP

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Å–∞–π—Ç–∞ (–ø–æ—Ä—Ç 3030)
curl http://127.0.0.1:3030

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –∞–¥–º–∏–Ω–∫–∏ (–ø–æ—Ä—Ç 3001)
curl http://127.0.0.1:3001
```

---

## –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS

**–í–ê–ñ–ù–û:** –ü–µ—Ä–µ–¥ –ø–æ–ª—É—á–µ–Ω–∏–µ–º SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ DNS –∑–∞–ø–∏—Å–∏:

–í –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è DNS –≤–∞—à–µ–≥–æ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–æ–º–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ A –∑–∞–ø–∏—Å–∏:

### –î–ª—è lux-on.org:
- `lux-on.org` ‚Üí A –∑–∞–ø–∏—Å—å ‚Üí `147.45.99.111`
- `www.lux-on.org` ‚Üí A –∑–∞–ø–∏—Å—å ‚Üí `147.45.99.111`

### –î–ª—è pipiska.net:
- `pipiska.net` ‚Üí A –∑–∞–ø–∏—Å—å ‚Üí `147.45.99.111`
- `www.pipiska.net` ‚Üí A –∑–∞–ø–∏—Å—å ‚Üí `147.45.99.111`

**–ü–æ–¥–æ–∂–¥–∏—Ç–µ 5-10 –º–∏–Ω—É—Ç** –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ DNS –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π.

---

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS –¥–ª—è lux-on.org
dig lux-on.org +short
dig www.lux-on.org +short

# –ü—Ä–æ–≤–µ—Ä–∫–∞ DNS –¥–ª—è pipiska.net
dig pipiska.net +short
dig www.pipiska.net +short

# –í—Å–µ –¥–æ–ª–∂–Ω—ã –≤–µ—Ä–Ω—É—Ç—å: 147.45.99.111
```

---

## –®–∞–≥ 6: –ü–æ–ª—É—á–µ–Ω–∏–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

### –î–ª—è lux-on.org:

```bash
certbot --nginx -d lux-on.org -d www.lux-on.org \
  --non-interactive \
  --agree-tos \
  --email admin@lux-on.org \
  --redirect
```

### –î–ª—è pipiska.net:

```bash
certbot --nginx -d pipiska.net -d www.pipiska.net \
  --non-interactive \
  --agree-tos \
  --email admin@pipiska.net \
  --redirect
```

---

## –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ lux-on.org
certbot certificates | grep lux-on.org

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ pipiska.net
certbot certificates | grep pipiska.net
```

---

## –®–∞–≥ 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HTTPS

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ lux-on.org
curl -I https://lux-on.org

# –ü—Ä–æ–≤–µ—Ä–∫–∞ pipiska.net
curl -I https://pipiska.net
```

---

## –®–∞–≥ 9: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```bash
# Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç cron –∑–∞–¥–∞—á—É, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∏–º:
systemctl status certbot.timer

# –ï—Å–ª–∏ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω, –≤–∫–ª—é—á–∏—Ç–µ:
systemctl enable certbot.timer
systemctl start certbot.timer
```

---

## –®–∞–≥ 10: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–∞–π—Ç–æ–≤

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- https://lux-on.org
- https://pipiska.net

–û–±–∞ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –ø–æ HTTPS!

---

## –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

### –ü—Ä–æ–±–ª–µ–º–∞: DNS –µ—â–µ –Ω–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏–ª—Å—è

```bash
# –ü–æ–¥–æ–∂–¥–∏—Ç–µ –µ—â–µ 10-15 –º–∏–Ω—É—Ç –∏ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ DNS:
certbot certonly --standalone -d lux-on.org -d www.lux-on.org
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–Ω—è—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤
netstat -tulpn | grep -E '3001|3030|80|443'

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ PM2 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
pm2 stop all

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
cd /var/www/luxon/app && pm2 start ecosystem.config.js
cd /var/www/luxon/admin_nextjs && pm2 start ecosystem.config.js
```

### –ü—Ä–æ–±–ª–µ–º–∞: Nginx –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
nginx -t

# –ü—Ä–æ—Å–º–æ—Ç—Ä –æ—à–∏–±–æ–∫
tail -f /var/log/nginx/error.log

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
systemctl restart nginx
```

### –ü—Ä–æ–±–ª–µ–º–∞: Certbot –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –¥–æ–º–µ–Ω –¥–æ—Å—Ç—É–ø–µ–Ω
curl http://lux-on.org
curl http://pipiska.net

# –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
cat /etc/nginx/sites-available/lux-on.org
cat /etc/nginx/sites-available/pipiska.net

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ –µ—Å—Ç—å:
# server_name lux-on.org www.lux-on.org;
# listen 80;
```

---

## –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
pm2 status
systemctl status nginx
systemctl status certbot.timer

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
pm2 logs --lines 20
tail -20 /var/log/nginx/error.log
```

---

## –ì–æ—Ç–æ–≤–æ! üéâ

–¢–µ–ø–µ—Ä—å –≤–∞—à–∏ —Å–∞–π—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ HTTPS:
- ‚úÖ https://lux-on.org
- ‚úÖ https://pipiska.net

–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∫–∞–∂–¥—ã–µ 90 –¥–Ω–µ–π.

