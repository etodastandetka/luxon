# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã "Conflict: terminated by other getUpdates request"

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –∫–æ–≥–¥–∞ –∑–∞–ø—É—â–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –±–æ—Ç–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

## –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã PM2

```bash
pm2 list
```

### 2. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã operator_bot

```bash
pm2 stop operator_bot
pm2 delete operator_bot
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ—Ç –ª–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Python, –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –Ω–∞–ø—Ä—è–º—É—é

```bash
ps aux | grep support_bot.py
ps aux | grep bot.py
```

–ï—Å–ª–∏ –Ω–∞–π–¥–µ—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã, —É–±–µ–π—Ç–µ –∏—Ö:
```bash
pkill -f support_bot.py
pkill -f bot.py
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ –∑–∞–Ω–æ–≤–æ

```bash
cd /var/www/luxon/bot
pm2 start ecosystem.config.js --only operator_bot
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

```bash
pm2 logs operator_bot --lines 20
```

–î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ:
```
ü§ñ –ë–æ—Ç —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∑–∞–ø—É—â–µ–Ω!
```

## –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–Ω—É—é –æ—á–∏—Å—Ç–∫—É:

```bash
# 1. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Å–µ PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã
pm2 stop all
pm2 delete all

# 2. –£–±–µ–π—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Python —Å –±–æ—Ç–∞–º–∏
pkill -f support_bot.py
pkill -f bot.py
pkill -f "python.*bot"

# 3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 5 —Å–µ–∫—É–Ω–¥
sleep 5

# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –Ω–µ—Ç
ps aux | grep -E "(support_bot|bot.py)" | grep -v grep

# 5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç—ã –∑–∞–Ω–æ–≤–æ
cd /var/www/luxon/bot
pm2 start ecosystem.config.js

# 6. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
pm2 status
pm2 logs
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ç–æ–∫–µ–Ω–æ–≤

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞–∑–Ω—ã–µ –±–æ—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–∑–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã:

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω—ã –≤ –∫–æ–¥–µ
grep -r "BOT_TOKEN\|SUPPORT_BOT_TOKEN" /var/www/luxon/bot/*.py
```

- `bot.py` –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `BOT_TOKEN`
- `support_bot.py` –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SUPPORT_BOT_TOKEN`

–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ, —ç—Ç–æ –≤—ã–∑–æ–≤–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç!

## –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ PM2** –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–æ–≤, –Ω–µ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ `python`
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º**, —á—Ç–æ —Å—Ç–∞—Ä—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
   ```bash
   pm2 list
   ps aux | grep -E "(support_bot|bot.py)"
   ```
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `drop_pending_updates=True`** –≤ –∫–æ–¥–µ (—É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ)

## –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ—Ç –ª–∏ cron-–∑–∞–¥–∞—á, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—É—Å–∫–∞—é—Ç –±–æ—Ç–∞:
   ```bash
   crontab -l
   ```
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ systemd —Å–µ—Ä–≤–∏—Å—ã:
   ```bash
   systemctl list-units | grep bot
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –≤ `/etc/rc.local` –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö

